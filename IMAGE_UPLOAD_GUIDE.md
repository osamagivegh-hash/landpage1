# دليل رفع الصور في لوحة تحكم مطعم أوشال

## نظرة عامة

تم إضافة نظام رفع الصور المحلي إلى لوحة التحكم، مما يسمح لك برفع الصور مباشرة من جهازك بدلاً من استخدام روابط خارجية.

## الميزات الجديدة

### ✅ رفع الصور المحلي
- رفع الصور مباشرة من جهازك
- دعم جميع أنواع الصور (JPG, PNG, GIF, WebP)
- حد أقصى 5MB لكل صورة
- معاينة فورية للصور

### ✅ واجهة سهلة الاستخدام
- سحب وإفلات الصور
- معاينة الصور قبل الرفع
- رسائل خطأ واضحة
- إمكانية حذف الصور

### ✅ أمان وحماية
- التحقق من نوع الملف
- التحقق من حجم الملف
- أسماء ملفات فريدة
- حماية من الملفات الضارة

## كيفية الاستخدام

### 1. رفع صورة وجبة جديدة

1. اذهب إلى لوحة التحكم
2. اختر "إدارة الوجبات"
3. اضغط "إضافة وجبة جديدة"
4. في قسم "صورة الوجبة":
   - اضغط على منطقة الرفع
   - أو اسحب الصورة إلى المنطقة
   - أو اضغط "اختيار صورة"
5. انتظر حتى اكتمال الرفع
6. ستظهر معاينة للصورة
7. أكمل باقي البيانات واحفظ

### 2. رفع صورة عرض جديد

1. اذهب إلى "إدارة العروض"
2. اضغط "إضافة عرض جديد"
3. في قسم "صورة العرض":
   - اتبع نفس خطوات رفع صورة الوجبة
4. الصورة اختيارية للعروض

### 3. تعديل صورة موجودة

1. اختر الوجبة أو العرض المراد تعديله
2. اضغط زر التعديل
3. في قسم الصورة:
   - اضغط على الصورة الحالية لحذفها
   - أو اضغط "اختيار صورة" لرفع صورة جديدة
4. احفظ التغييرات

## أنواع الملفات المدعومة

- **JPG/JPEG**: للصور الفوتوغرافية
- **PNG**: للصور مع خلفية شفافة
- **GIF**: للصور المتحركة
- **WebP**: للصور الحديثة عالية الجودة

## حدود النظام

- **حجم الملف**: حد أقصى 5MB
- **عدد الملفات**: صورة واحدة لكل وجبة/عرض
- **التخزين**: الصور محفوظة في مجلد `backend/uploads`

## هيكل الملفات

```
backend/
├── uploads/           # مجلد الصور المرفوعة
│   ├── image-1234567890-123456789.jpg
│   ├── image-1234567891-123456789.png
│   └── ...
├── routes/
│   └── upload.js      # API رفع الصور
└── ...
```

## API Endpoints

### رفع صورة واحدة
```
POST /api/upload/image
Content-Type: multipart/form-data
Body: { image: File }
```

### رفع عدة صور
```
POST /api/upload/images
Content-Type: multipart/form-data
Body: { images: File[] }
```

### حذف صورة
```
DELETE /api/upload/image/:filename
```

## استكشاف الأخطاء

### مشاكل شائعة وحلولها:

#### 1. "فقط ملفات الصور مسموحة"
- **السبب**: نوع الملف غير مدعوم
- **الحل**: استخدم JPG, PNG, GIF, أو WebP

#### 2. "حجم الملف يجب أن يكون أقل من 5MB"
- **السبب**: الصورة كبيرة جداً
- **الحل**: قلل حجم الصورة أو اضغطها

#### 3. "فشل في رفع الصورة"
- **السبب**: مشكلة في الاتصال أو الخادم
- **الحل**: 
  - تأكد من تشغيل الباك إند
  - تحقق من اتصال الإنترنت
  - أعد المحاولة

#### 4. الصورة لا تظهر
- **السبب**: مشكلة في مسار الصورة
- **الحل**:
  - تأكد من وجود الصورة في مجلد `uploads`
  - تحقق من صلاحيات المجلد
  - أعد تشغيل الخادم

## نصائح للاستخدام الأمثل

### 1. تحسين الصور
- استخدم صور بحجم مناسب (800x600 بكسل)
- اضغط الصور لتقليل الحجم
- استخدم تنسيق JPG للصور الفوتوغرافية

### 2. تنظيم الصور
- استخدم أسماء واضحة للصور
- احتفظ بنسخة احتياطية من الصور
- نظف الصور غير المستخدمة دورياً

### 3. الأداء
- تجنب الصور الكبيرة جداً
- استخدم صور عالية الجودة للوجبات
- فكر في استخدام CDN للإنتاج

## الأمان

### الحماية المطبقة:
- ✅ التحقق من نوع الملف
- ✅ تحديد حجم الملف
- ✅ أسماء ملفات فريدة
- ✅ عزل الملفات المرفوعة

### توصيات إضافية:
- استخدم HTTPS في الإنتاج
- أضف نظام مصادقة أقوى
- راقب استخدام التخزين
- احتفظ بنسخ احتياطية

## الدعم الفني

إذا واجهت مشاكل:

1. **تحقق من Console المتصفح** للأخطاء
2. **تحقق من logs الخادم** في terminal
3. **تأكد من تشغيل جميع الخدمات**
4. **تحقق من صلاحيات المجلدات**

## التطوير المستقبلي

### ميزات مقترحة:
- ضغط الصور تلقائياً
- رفع متعدد للصور
- معرض صور للوجبات
- تكامل مع خدمات التخزين السحابي
- تحسين الصور تلقائياً

---

**ملاحظة**: هذا النظام مصمم للتطوير والاختبار. للإنتاج، يُنصح باستخدام خدمات التخزين السحابي مثل AWS S3 أو Cloudinary.


